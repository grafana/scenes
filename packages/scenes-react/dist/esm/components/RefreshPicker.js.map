{"version":3,"file":"RefreshPicker.js","sources":["../../../src/components/RefreshPicker.tsx"],"sourcesContent":["import React, { useEffect, useId } from 'react';\nimport { useSceneContext } from '../hooks/hooks';\nimport { SceneRefreshPicker, SceneRefreshPickerState } from '@grafana/scenes';\nimport { usePrevious } from 'react-use';\n\nexport interface Props {\n  refresh?: string;\n  withText?: boolean;\n}\n\nexport function RefreshPicker(props: Props) {\n  const scene = useSceneContext();\n  const key = useId();\n  const prevProps = usePrevious(props);\n\n  let picker = scene.findByKey<SceneRefreshPicker>(key);\n\n  if (!picker) {\n    picker = new SceneRefreshPicker({\n      key: key,\n      ...props,\n    });\n  }\n\n  useEffect(() => scene.addToScene(picker), [picker, scene]);\n\n  // Update options\n  useEffect(() => {\n    const stateUpdate: Partial<SceneRefreshPickerState> = {};\n\n    if (!prevProps) {\n      return;\n    }\n\n    if (props.refresh !== prevProps.refresh) {\n      stateUpdate.refresh = props.refresh;\n    }\n\n    if (props.withText !== prevProps.withText) {\n      stateUpdate.withText = props.withText;\n    }\n\n    picker.setState(stateUpdate);\n  }, [picker, props, prevProps]);\n\n  return <picker.Component model={picker} />;\n}\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;AAUO,SAAS,cAAc,KAAc,EAAA;AAC1C,EAAA,MAAM,QAAQ,eAAgB,EAAA,CAAA;AAC9B,EAAA,MAAM,MAAM,KAAM,EAAA,CAAA;AAClB,EAAM,MAAA,SAAA,GAAY,YAAY,KAAK,CAAA,CAAA;AAEnC,EAAI,IAAA,MAAA,GAAS,KAAM,CAAA,SAAA,CAA8B,GAAG,CAAA,CAAA;AAEpD,EAAA,IAAI,CAAC,MAAQ,EAAA;AACX,IAAA,MAAA,GAAS,IAAI,kBAAmB,CAAA,cAAA,CAAA;AAAA,MAC9B,GAAA;AAAA,KAAA,EACG,KACJ,CAAA,CAAA,CAAA;AAAA,GACH;AAEA,EAAU,SAAA,CAAA,MAAM,MAAM,UAAW,CAAA,MAAM,GAAG,CAAC,MAAA,EAAQ,KAAK,CAAC,CAAA,CAAA;AAGzD,EAAA,SAAA,CAAU,MAAM;AACd,IAAA,MAAM,cAAgD,EAAC,CAAA;AAEvD,IAAA,IAAI,CAAC,SAAW,EAAA;AACd,MAAA,OAAA;AAAA,KACF;AAEA,IAAI,IAAA,KAAA,CAAM,OAAY,KAAA,SAAA,CAAU,OAAS,EAAA;AACvC,MAAA,WAAA,CAAY,UAAU,KAAM,CAAA,OAAA,CAAA;AAAA,KAC9B;AAEA,IAAI,IAAA,KAAA,CAAM,QAAa,KAAA,SAAA,CAAU,QAAU,EAAA;AACzC,MAAA,WAAA,CAAY,WAAW,KAAM,CAAA,QAAA,CAAA;AAAA,KAC/B;AAEA,IAAA,MAAA,CAAO,SAAS,WAAW,CAAA,CAAA;AAAA,GAC1B,EAAA,CAAC,MAAQ,EAAA,KAAA,EAAO,SAAS,CAAC,CAAA,CAAA;AAE7B,EAAO,uBAAA,KAAA,CAAA,aAAA,CAAC,OAAO,SAAP,EAAA;AAAA,IAAiB,KAAO,EAAA,MAAA;AAAA,GAAQ,CAAA,CAAA;AAC1C;;;;"}