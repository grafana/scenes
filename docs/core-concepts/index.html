<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-core-concepts">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.4.0">
<title data-rh="true">Core concepts | Grafana Scenes</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://grafana.github.io/scenes/docs/core-concepts"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Core concepts | Grafana Scenes"><meta data-rh="true" name="description" content="This topic explains the core concepts of Scenes and how to use them in creating your own scene."><meta data-rh="true" property="og:description" content="This topic explains the core concepts of Scenes and how to use them in creating your own scene."><link data-rh="true" rel="icon" href="/scenes/img/favicon.png"><link data-rh="true" rel="canonical" href="https://grafana.github.io/scenes/docs/core-concepts"><link data-rh="true" rel="alternate" href="https://grafana.github.io/scenes/docs/core-concepts" hreflang="en"><link data-rh="true" rel="alternate" href="https://grafana.github.io/scenes/docs/core-concepts" hreflang="x-default"><link rel="preconnect" href="https://www.googletagmanager.com">
<script>window.dataLayer=window.dataLayer||[]</script>
<script>!function(e,t,a,n,g){e[n]=e[n]||[],e[n].push({"gtm.start":(new Date).getTime(),event:"gtm.js"});var m=t.getElementsByTagName(a)[0],r=t.createElement(a);r.async=!0,r.src="https://www.googletagmanager.com/gtm.js?id=G-X24RRL503H",m.parentNode.insertBefore(r,m)}(window,document,"script","dataLayer")</script><link rel="stylesheet" href="/scenes/assets/css/styles.0cb982eb.css">
<link rel="preload" href="/scenes/assets/js/runtime~main.a5aa9f6c.js" as="script">
<link rel="preload" href="/scenes/assets/js/main.0a4c2b60.js" as="script">
<meta http-equiv="refresh" content="0; URL='https://grafana.com/developers/core-concepts'" /> 
</head>
<body class="navigation-with-keyboard">
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=G-X24RRL503H" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>

<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}return t}()||function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"dark")}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_G6ar" href="#docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/scenes/"><div class="navbar__logo"><img src="/scenes/img/logo.svg" alt="Grafana Logo" class="themedImage_RWGG themedImage--light_riBm"><img src="/scenes/img/logo.svg" alt="Grafana Logo" class="themedImage_RWGG themedImage--dark_Dsi0"></div><b class="navbar__title text--truncate">Grafana Scenes</b></a></div><div class="navbar__items navbar__items--right"><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/scenes/docs/getting-started">Docs</a><a href="https://www.github.com/grafana/scenes" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_awgD"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="searchBox_xrOJ"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_UyTV docsWrapper_BqXd"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_z1FD" type="button"></button><div class="docPage_pOTq"><aside class="theme-doc-sidebar-container docSidebarContainer_aIKW"><div class="sidebarViewport_DwR9"><div class="sidebar_mhZE"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_Y1UP"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" href="/scenes/docs/getting-started">Getting started</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/scenes/docs/getting-started">Setup</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/scenes/docs/core-concepts">Core concepts</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="true" href="/scenes/docs/scene-layout">Scene objects</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/scenes/docs/scene-layout">Layouts</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/scenes/docs/visualizations">Visualizations</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/scenes/docs/variables">Variables</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/scenes/docs/transformations">Transformations</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="true" tabindex="0" href="/scenes/docs/scene-app">Scenes apps</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/scenes/docs/scene-app">Building apps with Scenes</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/scenes/docs/scene-app-tabs">Tabs</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/scenes/docs/scene-app-drilldown">Drill-down pages</a></li></ul></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="true" href="/scenes/docs/advanced-custom-scene-objects">Advanced usage</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/scenes/docs/advanced-custom-scene-objects">Custom scene objects</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/scenes/docs/advanced-activation-handlers">Activation handlers</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/scenes/docs/advanced-data">Data and time range in custom scene objects</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/scenes/docs/advanced-variables">Variables in custom scene objects</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/scenes/docs/advanced-behaviors">Behaviors</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/scenes/docs/advanced-custom-datasource">Custom data sources</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/scenes/docs/advanced-time-range-comparison">Time range comparison</a></li></ul></li></ul></nav></div></div></aside><main class="docMainContainer_fv3b"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_YAwJ"><div class="docItemContainer_Rv5Z"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_zCmv" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/scenes/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_JFrk"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Getting started</span><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Core concepts</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_O_Qc theme-doc-toc-mobile tocMobile_tjDr"><button type="button" class="clean-btn tocCollapsibleButton_htYj">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Core concepts</h1></header><p>This topic explains the core concepts of Scenes and how to use them in creating your own scene.</p><h2 class="anchor anchorWithStickyNavbar_fF9Z" id="scene">Scene<a href="#scene" class="hash-link" aria-label="Direct link to Scene" title="Direct link to Scene">​</a></h2><p>A scene is a collection of objects, called <em>scene objects</em>. These objects represent different aspects of the scene: data, time ranges, variables, layout, and visualizations. Together, scene objects form an <em>object tree</em>:</p><p><img loading="lazy" alt="Scene objects tree" src="/scenes/assets/images/sceneTree-d39fdb5e339a83eebcaf46985cc778e6.png" width="1341" height="921" class="img__Ss2"></p><p>Scenes allow you to group and nest objects. Things like data, time ranges, or variables can be added to any object in the tree, making them available to that object and all descendant objects. Because of this, scenes allow you to create dashboards that have multiple time ranges, queries that can be shared and transformed, or nested variables.</p><p>@grafana/scenes comes with multiple objects<!-- -->—<!-- -->like <code>SceneQueryRunner</code>, <code>SceneFlexLayout</code>, <code>VizPanel</code>, and more<!-- -->—<!-- -->to solve common problems. However, you can also create your own scene objects to extend functionality.</p><h2 class="anchor anchorWithStickyNavbar_fF9Z" id="scene-object">Scene object<a href="#scene-object" class="hash-link" aria-label="Direct link to Scene object" title="Direct link to Scene object">​</a></h2><p>Scenes are built from atomic objects called scene objects. A scene object is defined with:</p><ul><li>State - An interface extending <code>SceneObjectState</code>.</li></ul><div class="language-tsx codeBlockContainer_ZGJx theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#22252b"><div class="codeBlockContent_qZBB"><pre tabindex="0" class="prism-code language-tsx codeBlock_TAPP thin-scrollbar"><code class="codeBlockLines_AdAo"><span class="token-line" style="color:#F8F8F2"><span class="token keyword" style="color:#fbad37;font-style:italic">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:rgb(204, 204, 220)">{</span><span class="token imports"> </span><span class="token imports maybe-class-name">SceneObjectState</span><span class="token imports"> </span><span class="token imports punctuation" style="color:rgb(204, 204, 220)">}</span><span class="token plain"> </span><span class="token keyword" style="color:#fbad37;font-style:italic">from</span><span class="token plain"> </span><span class="token string" style="color:#FF5286">&#x27;@grafana/scenes&#x27;</span><span class="token punctuation" style="color:rgb(204, 204, 220)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgba(204, 204, 220, 0.65)">// 1. Create interface that describes state of the scene object</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:#fbad37;font-style:italic">interface</span><span class="token plain"> </span><span class="token class-name">CounterState</span><span class="token plain"> </span><span class="token keyword" style="color:#fbad37;font-style:italic">extends</span><span class="token plain"> </span><span class="token class-name">SceneObjectState</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(204, 204, 220)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  count</span><span class="token operator">:</span><span class="token plain"> </span><span class="token builtin" style="color:#6E9FFF">number</span><span class="token punctuation" style="color:rgb(204, 204, 220)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(204, 204, 220)">}</span><br></span></code></pre><div class="buttonGroup_TNwR"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_MVhB" aria-hidden="true"><svg class="copyButtonIcon_yxgH" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_QJLJ" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li>Model - A class extending <code>SceneObjectBase</code> class. The Model contains scene object logic.</li></ul><div class="language-tsx codeBlockContainer_ZGJx theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#22252b"><div class="codeBlockContent_qZBB"><pre tabindex="0" class="prism-code language-tsx codeBlock_TAPP thin-scrollbar"><code class="codeBlockLines_AdAo"><span class="token-line" style="color:#F8F8F2"><span class="token keyword" style="color:#fbad37;font-style:italic">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:rgb(204, 204, 220)">{</span><span class="token imports"> </span><span class="token imports maybe-class-name">SceneObjectBase</span><span class="token imports"> </span><span class="token imports punctuation" style="color:rgb(204, 204, 220)">}</span><span class="token plain"> </span><span class="token keyword" style="color:#fbad37;font-style:italic">from</span><span class="token plain"> </span><span class="token string" style="color:#FF5286">&#x27;@grafana/scenes&#x27;</span><span class="token punctuation" style="color:rgb(204, 204, 220)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:#fbad37;font-style:italic">export</span><span class="token plain"> </span><span class="token keyword" style="color:#fbad37;font-style:italic">class</span><span class="token plain"> </span><span class="token class-name">Counter</span><span class="token plain"> </span><span class="token keyword" style="color:#fbad37;font-style:italic">extends</span><span class="token plain"> </span><span class="token class-name">SceneObjectBase</span><span class="token class-name operator">&lt;</span><span class="token class-name">CounterState</span><span class="token class-name operator">&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(204, 204, 220)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token keyword" style="color:#fbad37;font-style:italic">public</span><span class="token plain"> </span><span class="token keyword" style="color:#fbad37;font-style:italic">static</span><span class="token plain"> </span><span class="token maybe-class-name">Component</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token maybe-class-name">CounterRenderer</span><span class="token punctuation" style="color:rgb(204, 204, 220)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token keyword" style="color:#fbad37;font-style:italic">public</span><span class="token plain"> </span><span class="token function" style="color:#6CCF8E">constructor</span><span class="token punctuation" style="color:rgb(204, 204, 220)">(</span><span class="token punctuation" style="color:rgb(204, 204, 220)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(204, 204, 220)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:#fbad37;font-style:italic">super</span><span class="token punctuation" style="color:rgb(204, 204, 220)">(</span><span class="token punctuation" style="color:rgb(204, 204, 220)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      count</span><span class="token operator">:</span><span class="token plain"> </span><span class="token number">0</span><span class="token punctuation" style="color:rgb(204, 204, 220)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(204, 204, 220)">}</span><span class="token punctuation" style="color:rgb(204, 204, 220)">)</span><span class="token punctuation" style="color:rgb(204, 204, 220)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(204, 204, 220)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token keyword" style="color:#fbad37;font-style:italic">public</span><span class="token plain"> </span><span class="token function-variable function" style="color:#6CCF8E">onIncrement</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(204, 204, 220)">(</span><span class="token punctuation" style="color:rgb(204, 204, 220)">)</span><span class="token plain"> </span><span class="token arrow operator">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(204, 204, 220)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:#fbad37;font-style:italic">this</span><span class="token punctuation" style="color:rgb(204, 204, 220)">.</span><span class="token method function property-access" style="color:#6CCF8E">setState</span><span class="token punctuation" style="color:rgb(204, 204, 220)">(</span><span class="token punctuation" style="color:rgb(204, 204, 220)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      count</span><span class="token operator">:</span><span class="token plain"> </span><span class="token keyword" style="color:#fbad37;font-style:italic">this</span><span class="token punctuation" style="color:rgb(204, 204, 220)">.</span><span class="token property-access">state</span><span class="token punctuation" style="color:rgb(204, 204, 220)">.</span><span class="token property-access">count</span><span class="token plain"> </span><span class="token operator">+</span><span class="token plain"> </span><span class="token number">1</span><span class="token punctuation" style="color:rgb(204, 204, 220)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(204, 204, 220)">}</span><span class="token punctuation" style="color:rgb(204, 204, 220)">)</span><span class="token punctuation" style="color:rgb(204, 204, 220)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(204, 204, 220)">}</span><span class="token punctuation" style="color:rgb(204, 204, 220)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(204, 204, 220)">}</span><br></span></code></pre><div class="buttonGroup_TNwR"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_MVhB" aria-hidden="true"><svg class="copyButtonIcon_yxgH" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_QJLJ" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li>React component - Used to render a scene object.</li></ul><div class="language-tsx codeBlockContainer_ZGJx theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#22252b"><div class="codeBlockContent_qZBB"><pre tabindex="0" class="prism-code language-tsx codeBlock_TAPP thin-scrollbar"><code class="codeBlockLines_AdAo"><span class="token-line" style="color:#F8F8F2"><span class="token keyword" style="color:#fbad37;font-style:italic">import</span><span class="token plain"> </span><span class="token imports maybe-class-name">React</span><span class="token plain"> </span><span class="token keyword" style="color:#fbad37;font-style:italic">from</span><span class="token plain"> </span><span class="token string" style="color:#FF5286">&#x27;react&#x27;</span><span class="token punctuation" style="color:rgb(204, 204, 220)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:#fbad37;font-style:italic">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:rgb(204, 204, 220)">{</span><span class="token imports"> </span><span class="token imports maybe-class-name">SceneComponentProps</span><span class="token imports"> </span><span class="token imports punctuation" style="color:rgb(204, 204, 220)">}</span><span class="token plain"> </span><span class="token keyword" style="color:#fbad37;font-style:italic">from</span><span class="token plain"> </span><span class="token string" style="color:#FF5286">&#x27;@grafana/scenes&#x27;</span><span class="token punctuation" style="color:rgb(204, 204, 220)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:#fbad37;font-style:italic">function</span><span class="token plain"> </span><span class="token function" style="color:#6CCF8E">CounterRenderer</span><span class="token punctuation" style="color:rgb(204, 204, 220)">(</span><span class="token punctuation" style="color:rgb(204, 204, 220)">{</span><span class="token plain"> model </span><span class="token punctuation" style="color:rgb(204, 204, 220)">}</span><span class="token operator">:</span><span class="token plain"> </span><span class="token maybe-class-name">SceneComponentProps</span><span class="token operator">&lt;</span><span class="token maybe-class-name">Counter</span><span class="token operator">&gt;</span><span class="token punctuation" style="color:rgb(204, 204, 220)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(204, 204, 220)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token keyword" style="color:#fbad37;font-style:italic">const</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(204, 204, 220)">{</span><span class="token plain"> count </span><span class="token punctuation" style="color:rgb(204, 204, 220)">}</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> model</span><span class="token punctuation" style="color:rgb(204, 204, 220)">.</span><span class="token method function property-access" style="color:#6CCF8E">useState</span><span class="token punctuation" style="color:rgb(204, 204, 220)">(</span><span class="token punctuation" style="color:rgb(204, 204, 220)">)</span><span class="token punctuation" style="color:rgb(204, 204, 220)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token keyword" style="color:#fbad37;font-style:italic">return</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(204, 204, 220)">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token tag punctuation" style="color:rgb(204, 204, 220)">&lt;</span><span class="token tag" style="color:#FF5286">div</span><span class="token tag punctuation" style="color:rgb(204, 204, 220)">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain-text">      </span><span class="token tag punctuation" style="color:rgb(204, 204, 220)">&lt;</span><span class="token tag" style="color:#FF5286">div</span><span class="token tag punctuation" style="color:rgb(204, 204, 220)">&gt;</span><span class="token plain-text">Counter: </span><span class="token punctuation" style="color:rgb(204, 204, 220)">{</span><span class="token plain">count</span><span class="token punctuation" style="color:rgb(204, 204, 220)">}</span><span class="token tag punctuation" style="color:rgb(204, 204, 220)">&lt;/</span><span class="token tag" style="color:#FF5286">div</span><span class="token tag punctuation" style="color:rgb(204, 204, 220)">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain-text">      </span><span class="token tag punctuation" style="color:rgb(204, 204, 220)">&lt;</span><span class="token tag" style="color:#FF5286">button</span><span class="token tag" style="color:#FF5286"> </span><span class="token tag attr-name" style="color:rgb(204, 204, 220)">onClick</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:rgb(204, 204, 220)">=</span><span class="token tag script language-javascript punctuation" style="color:rgb(204, 204, 220)">{</span><span class="token tag script language-javascript" style="color:#FF5286">model</span><span class="token tag script language-javascript punctuation" style="color:rgb(204, 204, 220)">.</span><span class="token tag script language-javascript property-access" style="color:#FF5286">onIncrement</span><span class="token tag script language-javascript punctuation" style="color:rgb(204, 204, 220)">}</span><span class="token tag punctuation" style="color:rgb(204, 204, 220)">&gt;</span><span class="token plain-text">Increase</span><span class="token tag punctuation" style="color:rgb(204, 204, 220)">&lt;/</span><span class="token tag" style="color:#FF5286">button</span><span class="token tag punctuation" style="color:rgb(204, 204, 220)">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain-text">    </span><span class="token tag punctuation" style="color:rgb(204, 204, 220)">&lt;/</span><span class="token tag" style="color:#FF5286">div</span><span class="token tag punctuation" style="color:rgb(204, 204, 220)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(204, 204, 220)">)</span><span class="token punctuation" style="color:rgb(204, 204, 220)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(204, 204, 220)">}</span><br></span></code></pre><div class="buttonGroup_TNwR"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_MVhB" aria-hidden="true"><svg class="copyButtonIcon_yxgH" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_QJLJ" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_fF9Z" id="state">State<a href="#state" class="hash-link" aria-label="Direct link to State" title="Direct link to State">​</a></h2><p>Scene objects can have associated state. The shape of an object&#x27;s state is expressed through an interface that <em>must</em> extend the <code>SceneObjectState</code> interface:</p><div class="language-tsx codeBlockContainer_ZGJx theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#22252b"><div class="codeBlockContent_qZBB"><pre tabindex="0" class="prism-code language-tsx codeBlock_TAPP thin-scrollbar"><code class="codeBlockLines_AdAo"><span class="token-line" style="color:#F8F8F2"><span class="token keyword" style="color:#fbad37;font-style:italic">interface</span><span class="token plain"> </span><span class="token class-name">CounterState</span><span class="token plain"> </span><span class="token keyword" style="color:#fbad37;font-style:italic">extends</span><span class="token plain"> </span><span class="token class-name">SceneObjectState</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(204, 204, 220)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  count</span><span class="token operator">:</span><span class="token plain"> </span><span class="token builtin" style="color:#6E9FFF">number</span><span class="token punctuation" style="color:rgb(204, 204, 220)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(204, 204, 220)">}</span><br></span></code></pre><div class="buttonGroup_TNwR"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_MVhB" aria-hidden="true"><svg class="copyButtonIcon_yxgH" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_QJLJ" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_fF9Z" id="subscribe-to-state-changes">Subscribe to state changes<a href="#subscribe-to-state-changes" class="hash-link" aria-label="Direct link to Subscribe to state changes" title="Direct link to Subscribe to state changes">​</a></h3><p>A component can read the state from a scene object by using the <code>model</code> property that it receives when rendered. To subscribe to state changes, call the <code>model.useState</code> method:</p><div class="language-tsx codeBlockContainer_ZGJx theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#22252b"><div class="codeBlockContent_qZBB"><pre tabindex="0" class="prism-code language-tsx codeBlock_TAPP thin-scrollbar"><code class="codeBlockLines_AdAo"><span class="token-line" style="color:#F8F8F2"><span class="token keyword" style="color:#fbad37;font-style:italic">function</span><span class="token plain"> </span><span class="token function" style="color:#6CCF8E">CounterRenderer</span><span class="token punctuation" style="color:rgb(204, 204, 220)">(</span><span class="token punctuation" style="color:rgb(204, 204, 220)">{</span><span class="token plain"> model </span><span class="token punctuation" style="color:rgb(204, 204, 220)">}</span><span class="token operator">:</span><span class="token plain"> </span><span class="token maybe-class-name">SceneComponentProps</span><span class="token operator">&lt;</span><span class="token maybe-class-name">Counter</span><span class="token operator">&gt;</span><span class="token punctuation" style="color:rgb(204, 204, 220)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(204, 204, 220)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token keyword" style="color:#fbad37;font-style:italic">const</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(204, 204, 220)">{</span><span class="token plain"> count </span><span class="token punctuation" style="color:rgb(204, 204, 220)">}</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> model</span><span class="token punctuation" style="color:rgb(204, 204, 220)">.</span><span class="token method function property-access" style="color:#6CCF8E">useState</span><span class="token punctuation" style="color:rgb(204, 204, 220)">(</span><span class="token punctuation" style="color:rgb(204, 204, 220)">)</span><span class="token punctuation" style="color:rgb(204, 204, 220)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token comment" style="color:rgba(204, 204, 220, 0.65)">// ...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(204, 204, 220)">}</span><br></span></code></pre><div class="buttonGroup_TNwR"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_MVhB" aria-hidden="true"><svg class="copyButtonIcon_yxgH" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_QJLJ" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Subscribing to an object&#x27;s state using <code>model.useState()</code> will make the component reactive to state changes. Every change to the scene object state is immutable and will cause a re-render of the component.</p><h3 class="anchor anchorWithStickyNavbar_fF9Z" id="modify-state">Modify state<a href="#modify-state" class="hash-link" aria-label="Direct link to Modify state" title="Direct link to Modify state">​</a></h3><p>To change the state of a scene object, use the <code>setState</code> method that each scene object has. This can be done directly from the component:</p><div class="language-tsx codeBlockContainer_ZGJx theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#22252b"><div class="codeBlockContent_qZBB"><pre tabindex="0" class="prism-code language-tsx codeBlock_TAPP thin-scrollbar"><code class="codeBlockLines_AdAo"><span class="token-line" style="color:#F8F8F2"><span class="token keyword" style="color:#fbad37;font-style:italic">function</span><span class="token plain"> </span><span class="token function" style="color:#6CCF8E">CounterRenderer</span><span class="token punctuation" style="color:rgb(204, 204, 220)">(</span><span class="token punctuation" style="color:rgb(204, 204, 220)">{</span><span class="token plain"> model </span><span class="token punctuation" style="color:rgb(204, 204, 220)">}</span><span class="token operator">:</span><span class="token plain"> </span><span class="token maybe-class-name">SceneComponentProps</span><span class="token operator">&lt;</span><span class="token maybe-class-name">Counter</span><span class="token operator">&gt;</span><span class="token punctuation" style="color:rgb(204, 204, 220)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(204, 204, 220)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token keyword" style="color:#fbad37;font-style:italic">const</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(204, 204, 220)">{</span><span class="token plain"> count </span><span class="token punctuation" style="color:rgb(204, 204, 220)">}</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> model</span><span class="token punctuation" style="color:rgb(204, 204, 220)">.</span><span class="token method function property-access" style="color:#6CCF8E">useState</span><span class="token punctuation" style="color:rgb(204, 204, 220)">(</span><span class="token punctuation" style="color:rgb(204, 204, 220)">)</span><span class="token punctuation" style="color:rgb(204, 204, 220)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token keyword" style="color:#fbad37;font-style:italic">const</span><span class="token plain"> </span><span class="token function-variable function" style="color:#6CCF8E">onIncrement</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(204, 204, 220)">(</span><span class="token punctuation" style="color:rgb(204, 204, 220)">)</span><span class="token plain"> </span><span class="token arrow operator">=&gt;</span><span class="token plain"> model</span><span class="token punctuation" style="color:rgb(204, 204, 220)">.</span><span class="token method function property-access" style="color:#6CCF8E">setState</span><span class="token punctuation" style="color:rgb(204, 204, 220)">(</span><span class="token punctuation" style="color:rgb(204, 204, 220)">{</span><span class="token plain"> count</span><span class="token operator">:</span><span class="token plain"> count </span><span class="token operator">+</span><span class="token plain"> </span><span class="token number">1</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(204, 204, 220)">}</span><span class="token punctuation" style="color:rgb(204, 204, 220)">)</span><span class="token punctuation" style="color:rgb(204, 204, 220)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token comment" style="color:rgba(204, 204, 220, 0.65)">// ...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(204, 204, 220)">}</span><br></span></code></pre><div class="buttonGroup_TNwR"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_MVhB" aria-hidden="true"><svg class="copyButtonIcon_yxgH" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_QJLJ" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>This can also be done from a scene object class:</p><div class="language-tsx codeBlockContainer_ZGJx theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#22252b"><div class="codeBlockContent_qZBB"><pre tabindex="0" class="prism-code language-tsx codeBlock_TAPP thin-scrollbar"><code class="codeBlockLines_AdAo"><span class="token-line" style="color:#F8F8F2"><span class="token keyword" style="color:#fbad37;font-style:italic">export</span><span class="token plain"> </span><span class="token keyword" style="color:#fbad37;font-style:italic">class</span><span class="token plain"> </span><span class="token class-name">Counter</span><span class="token plain"> </span><span class="token keyword" style="color:#fbad37;font-style:italic">extends</span><span class="token plain"> </span><span class="token class-name">SceneObjectBase</span><span class="token class-name operator">&lt;</span><span class="token class-name">CounterState</span><span class="token class-name operator">&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(204, 204, 220)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token comment" style="color:rgba(204, 204, 220, 0.65)">// ...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token keyword" style="color:#fbad37;font-style:italic">public</span><span class="token plain"> </span><span class="token function-variable function" style="color:#6CCF8E">onIncrement</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(204, 204, 220)">(</span><span class="token punctuation" style="color:rgb(204, 204, 220)">)</span><span class="token plain"> </span><span class="token arrow operator">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(204, 204, 220)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:#fbad37;font-style:italic">this</span><span class="token punctuation" style="color:rgb(204, 204, 220)">.</span><span class="token method function property-access" style="color:#6CCF8E">setState</span><span class="token punctuation" style="color:rgb(204, 204, 220)">(</span><span class="token punctuation" style="color:rgb(204, 204, 220)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      count</span><span class="token operator">:</span><span class="token plain"> </span><span class="token keyword" style="color:#fbad37;font-style:italic">this</span><span class="token punctuation" style="color:rgb(204, 204, 220)">.</span><span class="token property-access">state</span><span class="token punctuation" style="color:rgb(204, 204, 220)">.</span><span class="token property-access">count</span><span class="token plain"> </span><span class="token operator">+</span><span class="token plain"> </span><span class="token number">1</span><span class="token punctuation" style="color:rgb(204, 204, 220)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(204, 204, 220)">}</span><span class="token punctuation" style="color:rgb(204, 204, 220)">)</span><span class="token punctuation" style="color:rgb(204, 204, 220)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(204, 204, 220)">}</span><span class="token punctuation" style="color:rgb(204, 204, 220)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(204, 204, 220)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:#fbad37;font-style:italic">function</span><span class="token plain"> </span><span class="token function" style="color:#6CCF8E">CounterRenderer</span><span class="token punctuation" style="color:rgb(204, 204, 220)">(</span><span class="token punctuation" style="color:rgb(204, 204, 220)">{</span><span class="token plain"> model </span><span class="token punctuation" style="color:rgb(204, 204, 220)">}</span><span class="token operator">:</span><span class="token plain"> </span><span class="token maybe-class-name">SceneComponentProps</span><span class="token operator">&lt;</span><span class="token maybe-class-name">Counter</span><span class="token operator">&gt;</span><span class="token punctuation" style="color:rgb(204, 204, 220)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(204, 204, 220)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token keyword" style="color:#fbad37;font-style:italic">const</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(204, 204, 220)">{</span><span class="token plain"> count </span><span class="token punctuation" style="color:rgb(204, 204, 220)">}</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> model</span><span class="token punctuation" style="color:rgb(204, 204, 220)">.</span><span class="token method function property-access" style="color:#6CCF8E">useState</span><span class="token punctuation" style="color:rgb(204, 204, 220)">(</span><span class="token punctuation" style="color:rgb(204, 204, 220)">)</span><span class="token punctuation" style="color:rgb(204, 204, 220)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token keyword" style="color:#fbad37;font-style:italic">return</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(204, 204, 220)">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token tag punctuation" style="color:rgb(204, 204, 220)">&lt;</span><span class="token tag" style="color:#FF5286">div</span><span class="token tag punctuation" style="color:rgb(204, 204, 220)">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain-text">      </span><span class="token tag punctuation" style="color:rgb(204, 204, 220)">&lt;</span><span class="token tag" style="color:#FF5286">div</span><span class="token tag punctuation" style="color:rgb(204, 204, 220)">&gt;</span><span class="token plain-text">Counter: </span><span class="token punctuation" style="color:rgb(204, 204, 220)">{</span><span class="token plain">count</span><span class="token punctuation" style="color:rgb(204, 204, 220)">}</span><span class="token tag punctuation" style="color:rgb(204, 204, 220)">&lt;/</span><span class="token tag" style="color:#FF5286">div</span><span class="token tag punctuation" style="color:rgb(204, 204, 220)">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain-text">      </span><span class="token tag punctuation" style="color:rgb(204, 204, 220)">&lt;</span><span class="token tag" style="color:#FF5286">button</span><span class="token tag" style="color:#FF5286"> </span><span class="token tag attr-name" style="color:rgb(204, 204, 220)">onClick</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:rgb(204, 204, 220)">=</span><span class="token tag script language-javascript punctuation" style="color:rgb(204, 204, 220)">{</span><span class="token tag script language-javascript" style="color:#FF5286">model</span><span class="token tag script language-javascript punctuation" style="color:rgb(204, 204, 220)">.</span><span class="token tag script language-javascript property-access" style="color:#FF5286">onIncrement</span><span class="token tag script language-javascript punctuation" style="color:rgb(204, 204, 220)">}</span><span class="token tag punctuation" style="color:rgb(204, 204, 220)">&gt;</span><span class="token plain-text">Increase</span><span class="token tag punctuation" style="color:rgb(204, 204, 220)">&lt;/</span><span class="token tag" style="color:#FF5286">button</span><span class="token tag punctuation" style="color:rgb(204, 204, 220)">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain-text">    </span><span class="token tag punctuation" style="color:rgb(204, 204, 220)">&lt;/</span><span class="token tag" style="color:#FF5286">div</span><span class="token tag punctuation" style="color:rgb(204, 204, 220)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(204, 204, 220)">)</span><span class="token punctuation" style="color:rgb(204, 204, 220)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(204, 204, 220)">}</span><br></span></code></pre><div class="buttonGroup_TNwR"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_MVhB" aria-hidden="true"><svg class="copyButtonIcon_yxgH" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_QJLJ" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="theme-admonition theme-admonition-note alert alert--secondary admonition_qNG0"><div class="admonitionHeading_l909"><span class="admonitionIcon_UNbs"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_oUmQ"><p>We suggest that you implement the state-modifying methods in the scene object rather than in the component to separate the model complexity from the component.</p></div></div><h2 class="anchor anchorWithStickyNavbar_fF9Z" id="data-and-time-range">Data and time range<a href="#data-and-time-range" class="hash-link" aria-label="Direct link to Data and time range" title="Direct link to Data and time range">​</a></h2><p>Use the <code>$data</code> property to add data coming from Grafana data sources to a scene. Queries are configured using the <code>SceneQueryRunner</code> scene object:</p><div class="language-tsx codeBlockContainer_ZGJx theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#22252b"><div class="codeBlockContent_qZBB"><pre tabindex="0" class="prism-code language-tsx codeBlock_TAPP thin-scrollbar"><code class="codeBlockLines_AdAo"><span class="token-line" style="color:#F8F8F2"><span class="token keyword" style="color:#fbad37;font-style:italic">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:rgb(204, 204, 220)">{</span><span class="token imports"> </span><span class="token imports maybe-class-name">SceneQueryRunner</span><span class="token imports"> </span><span class="token imports punctuation" style="color:rgb(204, 204, 220)">}</span><span class="token plain"> </span><span class="token keyword" style="color:#fbad37;font-style:italic">from</span><span class="token plain"> </span><span class="token string" style="color:#FF5286">&#x27;@grafana/scenes&#x27;</span><span class="token punctuation" style="color:rgb(204, 204, 220)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:#fbad37;font-style:italic">const</span><span class="token plain"> queryRunner </span><span class="token operator">=</span><span class="token plain"> </span><span class="token keyword" style="color:#fbad37;font-style:italic">new</span><span class="token plain"> </span><span class="token class-name">SceneQueryRunner</span><span class="token punctuation" style="color:rgb(204, 204, 220)">(</span><span class="token punctuation" style="color:rgb(204, 204, 220)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  datasource</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(204, 204, 220)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    type</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:#FF5286">&#x27;prometheus&#x27;</span><span class="token punctuation" style="color:rgb(204, 204, 220)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    uid</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:#FF5286">&#x27;&lt;PROVIDE_GRAFANA_DS_UID&gt;&#x27;</span><span class="token punctuation" style="color:rgb(204, 204, 220)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(204, 204, 220)">}</span><span class="token punctuation" style="color:rgb(204, 204, 220)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  queries</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(204, 204, 220)">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(204, 204, 220)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      refId</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:#FF5286">&#x27;A&#x27;</span><span class="token punctuation" style="color:rgb(204, 204, 220)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      expr</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:#FF5286">&#x27;rate(prometheus_http_requests_total{}[5m])&#x27;</span><span class="token punctuation" style="color:rgb(204, 204, 220)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(204, 204, 220)">}</span><span class="token punctuation" style="color:rgb(204, 204, 220)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(204, 204, 220)">]</span><span class="token punctuation" style="color:rgb(204, 204, 220)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(204, 204, 220)">}</span><span class="token punctuation" style="color:rgb(204, 204, 220)">)</span><span class="token punctuation" style="color:rgb(204, 204, 220)">;</span><br></span></code></pre><div class="buttonGroup_TNwR"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_MVhB" aria-hidden="true"><svg class="copyButtonIcon_yxgH" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_QJLJ" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="theme-admonition theme-admonition-note alert alert--secondary admonition_qNG0"><div class="admonitionHeading_l909"><span class="admonitionIcon_UNbs"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_oUmQ"><p>Your Grafana instance must have a specified data source configured.</p></div></div><p>For <code>SceneQueryRunner</code> to work, you must add a time range to a scene. Each scene object has a <code>$timeRange</code> property to which the <code>SceneTimeRange</code> scene object can be added. To specify a time range for the query runner created in the previous example, add the <code>$timeRange</code> property in the object passed to the constructor:</p><div class="language-tsx codeBlockContainer_ZGJx theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#22252b"><div class="codeBlockContent_qZBB"><pre tabindex="0" class="prism-code language-tsx codeBlock_TAPP thin-scrollbar"><code class="codeBlockLines_AdAo"><span class="token-line" style="color:#F8F8F2"><span class="token keyword" style="color:#fbad37;font-style:italic">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:rgb(204, 204, 220)">{</span><span class="token imports"> </span><span class="token imports maybe-class-name">SceneQueryRunner</span><span class="token imports punctuation" style="color:rgb(204, 204, 220)">,</span><span class="token imports"> </span><span class="token imports maybe-class-name">SceneTimeRange</span><span class="token imports"> </span><span class="token imports punctuation" style="color:rgb(204, 204, 220)">}</span><span class="token plain"> </span><span class="token keyword" style="color:#fbad37;font-style:italic">from</span><span class="token plain"> </span><span class="token string" style="color:#FF5286">&#x27;@grafana/scenes&#x27;</span><span class="token punctuation" style="color:rgb(204, 204, 220)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:#fbad37;font-style:italic">const</span><span class="token plain"> queryRunner </span><span class="token operator">=</span><span class="token plain"> </span><span class="token keyword" style="color:#fbad37;font-style:italic">new</span><span class="token plain"> </span><span class="token class-name">SceneQueryRunner</span><span class="token punctuation" style="color:rgb(204, 204, 220)">(</span><span class="token punctuation" style="color:rgb(204, 204, 220)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  datasource</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(204, 204, 220)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    type</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:#FF5286">&#x27;prometheus&#x27;</span><span class="token punctuation" style="color:rgb(204, 204, 220)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    uid</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:#FF5286">&#x27;&lt;PROVIDE_GRAFANA_DS_UID&gt;&#x27;</span><span class="token punctuation" style="color:rgb(204, 204, 220)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(204, 204, 220)">}</span><span class="token punctuation" style="color:rgb(204, 204, 220)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  queries</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(204, 204, 220)">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(204, 204, 220)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      refId</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:#FF5286">&#x27;A&#x27;</span><span class="token punctuation" style="color:rgb(204, 204, 220)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      expr</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:#FF5286">&#x27;rate(prometheus_http_requests_total{}[5m])&#x27;</span><span class="token punctuation" style="color:rgb(204, 204, 220)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(204, 204, 220)">}</span><span class="token punctuation" style="color:rgb(204, 204, 220)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(204, 204, 220)">]</span><span class="token punctuation" style="color:rgb(204, 204, 220)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  $timeRange</span><span class="token operator">:</span><span class="token plain"> </span><span class="token keyword" style="color:#fbad37;font-style:italic">new</span><span class="token plain"> </span><span class="token class-name">SceneTimeRange</span><span class="token punctuation" style="color:rgb(204, 204, 220)">(</span><span class="token punctuation" style="color:rgb(204, 204, 220)">{</span><span class="token plain"> from</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:#FF5286">&#x27;now-5m&#x27;</span><span class="token punctuation" style="color:rgb(204, 204, 220)">,</span><span class="token plain"> to</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:#FF5286">&#x27;now&#x27;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(204, 204, 220)">}</span><span class="token punctuation" style="color:rgb(204, 204, 220)">)</span><span class="token punctuation" style="color:rgb(204, 204, 220)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(204, 204, 220)">}</span><span class="token punctuation" style="color:rgb(204, 204, 220)">)</span><span class="token punctuation" style="color:rgb(204, 204, 220)">;</span><br></span></code></pre><div class="buttonGroup_TNwR"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_MVhB" aria-hidden="true"><svg class="copyButtonIcon_yxgH" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_QJLJ" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Add the created <code>queryRunner</code> to your scene. Each object in the scene will now be able to access the provided data:</p><div class="language-ts codeBlockContainer_ZGJx theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#22252b"><div class="codeBlockContent_qZBB"><pre tabindex="0" class="prism-code language-ts codeBlock_TAPP thin-scrollbar"><code class="codeBlockLines_AdAo"><span class="token-line" style="color:#F8F8F2"><span class="token keyword" style="color:#fbad37;font-style:italic">const</span><span class="token plain"> scene </span><span class="token operator">=</span><span class="token plain"> </span><span class="token keyword" style="color:#fbad37;font-style:italic">new</span><span class="token plain"> </span><span class="token class-name">EmbeddedScene</span><span class="token punctuation" style="color:rgb(204, 204, 220)">(</span><span class="token punctuation" style="color:rgb(204, 204, 220)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    $data</span><span class="token operator">:</span><span class="token plain"> queryRunner</span><span class="token punctuation" style="color:rgb(204, 204, 220)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    body</span><span class="token operator">:</span><span class="token plain"> </span><span class="token operator">...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(204, 204, 220)">}</span><span class="token punctuation" style="color:rgb(204, 204, 220)">)</span><br></span></code></pre><div class="buttonGroup_TNwR"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_MVhB" aria-hidden="true"><svg class="copyButtonIcon_yxgH" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_QJLJ" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Each scene object has a <code>$data</code> and <code>$timeRange</code> property that can be configured. Because a scene is an object tree, the data and time range configured through <code>SceneQueryRunner</code> and <code>SceneTimeRange</code> respectively are available to the objects they&#x27;re added to <em>and</em> all descendant objects.</p><p>In the following example, each <code>VizPanel</code> uses different data. &quot;Panel A&quot; uses data defined on the <code>EmbeddedScene</code>, while &quot;Panel B&quot; has its own data and time range configured:</p><div class="language-tsx codeBlockContainer_ZGJx theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#22252b"><div class="codeBlockContent_qZBB"><pre tabindex="0" class="prism-code language-tsx codeBlock_TAPP thin-scrollbar"><code class="codeBlockLines_AdAo"><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgba(204, 204, 220, 0.65)">// Scene data, used by Panel A</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:#fbad37;font-style:italic">const</span><span class="token plain"> queryRunner1 </span><span class="token operator">=</span><span class="token plain"> </span><span class="token keyword" style="color:#fbad37;font-style:italic">new</span><span class="token plain"> </span><span class="token class-name">SceneQueryRunner</span><span class="token punctuation" style="color:rgb(204, 204, 220)">(</span><span class="token punctuation" style="color:rgb(204, 204, 220)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  datasource</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(204, 204, 220)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    type</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:#FF5286">&#x27;prometheus&#x27;</span><span class="token punctuation" style="color:rgb(204, 204, 220)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    uid</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:#FF5286">&#x27;&lt;PROVIDE_GRAFANA_DS_UID&gt;&#x27;</span><span class="token punctuation" style="color:rgb(204, 204, 220)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(204, 204, 220)">}</span><span class="token punctuation" style="color:rgb(204, 204, 220)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  queries</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(204, 204, 220)">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(204, 204, 220)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      refId</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:#FF5286">&#x27;A&#x27;</span><span class="token punctuation" style="color:rgb(204, 204, 220)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      expr</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:#FF5286">&#x27;rate(prometheus_http_requests_total{}[5m])&#x27;</span><span class="token punctuation" style="color:rgb(204, 204, 220)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(204, 204, 220)">}</span><span class="token punctuation" style="color:rgb(204, 204, 220)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(204, 204, 220)">]</span><span class="token punctuation" style="color:rgb(204, 204, 220)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(204, 204, 220)">}</span><span class="token punctuation" style="color:rgb(204, 204, 220)">)</span><span class="token punctuation" style="color:rgb(204, 204, 220)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgba(204, 204, 220, 0.65)">// Panel B data</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:#fbad37;font-style:italic">const</span><span class="token plain"> queryRunner2 </span><span class="token operator">=</span><span class="token plain"> </span><span class="token keyword" style="color:#fbad37;font-style:italic">new</span><span class="token plain"> </span><span class="token class-name">SceneQueryRunner</span><span class="token punctuation" style="color:rgb(204, 204, 220)">(</span><span class="token punctuation" style="color:rgb(204, 204, 220)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  datasource</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(204, 204, 220)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    type</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:#FF5286">&#x27;prometheus&#x27;</span><span class="token punctuation" style="color:rgb(204, 204, 220)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    uid</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:#FF5286">&#x27;&lt;PROVIDE_GRAFANA_DS_UID&gt;&#x27;</span><span class="token punctuation" style="color:rgb(204, 204, 220)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(204, 204, 220)">}</span><span class="token punctuation" style="color:rgb(204, 204, 220)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  queries</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(204, 204, 220)">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(204, 204, 220)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      refId</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:#FF5286">&#x27;A&#x27;</span><span class="token punctuation" style="color:rgb(204, 204, 220)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      expr</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:#FF5286">&#x27;avg by (job, instance, mode) (rate(node_cpu_seconds_total[5m]))&#x27;</span><span class="token punctuation" style="color:rgb(204, 204, 220)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(204, 204, 220)">}</span><span class="token punctuation" style="color:rgb(204, 204, 220)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(204, 204, 220)">]</span><span class="token punctuation" style="color:rgb(204, 204, 220)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(204, 204, 220)">}</span><span class="token punctuation" style="color:rgb(204, 204, 220)">)</span><span class="token punctuation" style="color:rgb(204, 204, 220)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:#fbad37;font-style:italic">const</span><span class="token plain"> scene </span><span class="token operator">=</span><span class="token plain"> </span><span class="token keyword" style="color:#fbad37;font-style:italic">new</span><span class="token plain"> </span><span class="token class-name">EmbeddedScene</span><span class="token punctuation" style="color:rgb(204, 204, 220)">(</span><span class="token punctuation" style="color:rgb(204, 204, 220)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  $data</span><span class="token operator">:</span><span class="token plain"> queryRunner1</span><span class="token punctuation" style="color:rgb(204, 204, 220)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token comment" style="color:rgba(204, 204, 220, 0.65)">// Global time range. queryRunner1 will use this time range.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  $timeRange</span><span class="token operator">:</span><span class="token plain"> </span><span class="token keyword" style="color:#fbad37;font-style:italic">new</span><span class="token plain"> </span><span class="token class-name">SceneTimeRange</span><span class="token punctuation" style="color:rgb(204, 204, 220)">(</span><span class="token punctuation" style="color:rgb(204, 204, 220)">{</span><span class="token plain"> from</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:#FF5286">&#x27;now-5m&#x27;</span><span class="token punctuation" style="color:rgb(204, 204, 220)">,</span><span class="token plain"> to</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:#FF5286">&#x27;now&#x27;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(204, 204, 220)">}</span><span class="token punctuation" style="color:rgb(204, 204, 220)">)</span><span class="token punctuation" style="color:rgb(204, 204, 220)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  body</span><span class="token operator">:</span><span class="token plain"> </span><span class="token keyword" style="color:#fbad37;font-style:italic">new</span><span class="token plain"> </span><span class="token class-name">SceneFlexLayout</span><span class="token punctuation" style="color:rgb(204, 204, 220)">(</span><span class="token punctuation" style="color:rgb(204, 204, 220)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    direction</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:#FF5286">&#x27;row&#x27;</span><span class="token punctuation" style="color:rgb(204, 204, 220)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    children</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(204, 204, 220)">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token keyword" style="color:#fbad37;font-style:italic">new</span><span class="token plain"> </span><span class="token class-name">SceneFlexItem</span><span class="token punctuation" style="color:rgb(204, 204, 220)">(</span><span class="token punctuation" style="color:rgb(204, 204, 220)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        width</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:#FF5286">&#x27;50%&#x27;</span><span class="token punctuation" style="color:rgb(204, 204, 220)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        height</span><span class="token operator">:</span><span class="token plain"> </span><span class="token number">300</span><span class="token punctuation" style="color:rgb(204, 204, 220)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        body</span><span class="token operator">:</span><span class="token plain"> </span><span class="token maybe-class-name">PanelBuilders</span><span class="token punctuation" style="color:rgb(204, 204, 220)">.</span><span class="token method function property-access" style="color:#6CCF8E">timeseries</span><span class="token punctuation" style="color:rgb(204, 204, 220)">(</span><span class="token punctuation" style="color:rgb(204, 204, 220)">)</span><span class="token punctuation" style="color:rgb(204, 204, 220)">.</span><span class="token method function property-access" style="color:#6CCF8E">setTitle</span><span class="token punctuation" style="color:rgb(204, 204, 220)">(</span><span class="token string" style="color:#FF5286">&#x27;Panel using global time range&#x27;</span><span class="token punctuation" style="color:rgb(204, 204, 220)">)</span><span class="token punctuation" style="color:rgb(204, 204, 220)">.</span><span class="token method function property-access" style="color:#6CCF8E">build</span><span class="token punctuation" style="color:rgb(204, 204, 220)">(</span><span class="token punctuation" style="color:rgb(204, 204, 220)">)</span><span class="token punctuation" style="color:rgb(204, 204, 220)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(204, 204, 220)">}</span><span class="token punctuation" style="color:rgb(204, 204, 220)">)</span><span class="token punctuation" style="color:rgb(204, 204, 220)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token keyword" style="color:#fbad37;font-style:italic">new</span><span class="token plain"> </span><span class="token class-name">SceneFlexItem</span><span class="token punctuation" style="color:rgb(204, 204, 220)">(</span><span class="token punctuation" style="color:rgb(204, 204, 220)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        width</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:#FF5286">&#x27;50%&#x27;</span><span class="token punctuation" style="color:rgb(204, 204, 220)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        height</span><span class="token operator">:</span><span class="token plain"> </span><span class="token number">300</span><span class="token punctuation" style="color:rgb(204, 204, 220)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        body</span><span class="token operator">:</span><span class="token plain"> </span><span class="token maybe-class-name">PanelBuilders</span><span class="token punctuation" style="color:rgb(204, 204, 220)">.</span><span class="token method function property-access" style="color:#6CCF8E">timeseries</span><span class="token punctuation" style="color:rgb(204, 204, 220)">(</span><span class="token punctuation" style="color:rgb(204, 204, 220)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          </span><span class="token punctuation" style="color:rgb(204, 204, 220)">.</span><span class="token method function property-access" style="color:#6CCF8E">setTitle</span><span class="token punctuation" style="color:rgb(204, 204, 220)">(</span><span class="token string" style="color:#FF5286">&#x27;Panel using local time range&#x27;</span><span class="token punctuation" style="color:rgb(204, 204, 220)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          </span><span class="token comment" style="color:rgba(204, 204, 220, 0.65)">// Time range defined on VizPanel object. queryRunner2 will use this time range.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          </span><span class="token punctuation" style="color:rgb(204, 204, 220)">.</span><span class="token method function property-access" style="color:#6CCF8E">setTimeRange</span><span class="token punctuation" style="color:rgb(204, 204, 220)">(</span><span class="token keyword" style="color:#fbad37;font-style:italic">new</span><span class="token plain"> </span><span class="token class-name">SceneTimeRange</span><span class="token punctuation" style="color:rgb(204, 204, 220)">(</span><span class="token punctuation" style="color:rgb(204, 204, 220)">{</span><span class="token plain"> from</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:#FF5286">&#x27;now-6h&#x27;</span><span class="token punctuation" style="color:rgb(204, 204, 220)">,</span><span class="token plain"> to</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:#FF5286">&#x27;now&#x27;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(204, 204, 220)">}</span><span class="token punctuation" style="color:rgb(204, 204, 220)">)</span><span class="token punctuation" style="color:rgb(204, 204, 220)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          </span><span class="token punctuation" style="color:rgb(204, 204, 220)">.</span><span class="token method function property-access" style="color:#6CCF8E">setData</span><span class="token punctuation" style="color:rgb(204, 204, 220)">(</span><span class="token plain">queryRunner2</span><span class="token punctuation" style="color:rgb(204, 204, 220)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          </span><span class="token punctuation" style="color:rgb(204, 204, 220)">.</span><span class="token method function property-access" style="color:#6CCF8E">build</span><span class="token punctuation" style="color:rgb(204, 204, 220)">(</span><span class="token punctuation" style="color:rgb(204, 204, 220)">)</span><span class="token punctuation" style="color:rgb(204, 204, 220)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(204, 204, 220)">}</span><span class="token punctuation" style="color:rgb(204, 204, 220)">)</span><span class="token punctuation" style="color:rgb(204, 204, 220)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(204, 204, 220)">]</span><span class="token punctuation" style="color:rgb(204, 204, 220)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(204, 204, 220)">}</span><span class="token punctuation" style="color:rgb(204, 204, 220)">)</span><span class="token punctuation" style="color:rgb(204, 204, 220)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(204, 204, 220)">}</span><span class="token punctuation" style="color:rgb(204, 204, 220)">)</span><span class="token punctuation" style="color:rgb(204, 204, 220)">;</span><br></span></code></pre><div class="buttonGroup_TNwR"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_MVhB" aria-hidden="true"><svg class="copyButtonIcon_yxgH" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_QJLJ" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_fF9Z" id="references-to-sceneobjects-and-the-parent-reference">References to SceneObject&#x27;s and the parent reference<a href="#references-to-sceneobjects-and-the-parent-reference" class="hash-link" aria-label="Direct link to References to SceneObject&#x27;s and the parent reference" title="Direct link to References to SceneObject&#x27;s and the parent reference">​</a></h2><p>It&#x27;s very important that you do not reuse the same instance to a scene object in multiple different scenes or locations within the same scene. A scene object&#x27;s parent is automatically set when it&#x27;s part of the state of another scene object. So if you want to use the same scene object instance as the part of the state of more than one scene object you have two options.</p><ul><li>Clone the source scene object. This will create a separate instance with no connection to the source object.</li><li>Use <code>SceneObjectRef</code> to wrap the instance. This makes sure the object&#x27;s original parent is not changed while allowing you to store a reference to the instance in the state of another scene object.</li></ul><h2 class="anchor anchorWithStickyNavbar_fF9Z" id="source-code">Source code<a href="#source-code" class="hash-link" aria-label="Direct link to Source code" title="Direct link to Source code">​</a></h2><p><a href="https://github.com/grafana/scenes/tree/main/docusaurus/docs/core-concepts.tsx" target="_blank" rel="noopener noreferrer">View the examples source code</a></p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/grafana/scenes/edit/main/docusaurus/website/../docs/core-concepts.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_UohW" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_T23F"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/scenes/docs/getting-started"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Set up Scenes</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/scenes/docs/scene-layout"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Building a scene layout</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_TN1Q thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#scene" class="table-of-contents__link toc-highlight">Scene</a></li><li><a href="#scene-object" class="table-of-contents__link toc-highlight">Scene object</a></li><li><a href="#state" class="table-of-contents__link toc-highlight">State</a><ul><li><a href="#subscribe-to-state-changes" class="table-of-contents__link toc-highlight">Subscribe to state changes</a></li><li><a href="#modify-state" class="table-of-contents__link toc-highlight">Modify state</a></li></ul></li><li><a href="#data-and-time-range" class="table-of-contents__link toc-highlight">Data and time range</a></li><li><a href="#references-to-sceneobjects-and-the-parent-reference" class="table-of-contents__link toc-highlight">References to SceneObject&#39;s and the parent reference</a></li><li><a href="#source-code" class="table-of-contents__link toc-highlight">Source code</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/scenes/docs/getting-started">Getting Started</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://www.github.com/grafana/scenes/issues" target="_blank" rel="noopener noreferrer" class="footer__link-item">Github Issues<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_awgD"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://community.grafana.com/c/plugin-development/30" target="_blank" rel="noopener noreferrer" class="footer__link-item">Grafana Community Forums<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_awgD"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">Social</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://www.github.com/grafana/scenes" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_awgD"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2023 Grafana Labs. Built with Docusaurus.</div></div></div></footer></div>
<script src="/scenes/assets/js/runtime~main.a5aa9f6c.js"></script>
<script src="/scenes/assets/js/main.0a4c2b60.js"></script>
</body>
</html>