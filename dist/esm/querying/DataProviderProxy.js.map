{"version":3,"file":"DataProviderProxy.js","sources":["../../../src/querying/DataProviderProxy.ts"],"sourcesContent":["import { Observable } from 'rxjs';\nimport { SceneObjectBase } from '../core/SceneObjectBase';\nimport { SceneObjectRef } from '../core/SceneObjectRef';\nimport { SceneDataState, SceneDataProvider, SceneDataProviderResult } from '../core/types';\n\nexport interface DataProviderSharerState extends SceneDataState {\n  source: SceneObjectRef<SceneDataProvider>;\n}\n\nexport class DataProviderProxy extends SceneObjectBase<DataProviderSharerState> implements SceneDataProvider {\n  public constructor(state: DataProviderSharerState) {\n    super({\n      source: state.source,\n      data: state.source.resolve().state.data,\n    });\n\n    this.addActivationHandler(() => {\n      this._subs.add(\n        this.state.source.resolve().subscribeToState((newState, oldState) => {\n          if (newState.data !== oldState.data) {\n            this.setState({ data: newState.data });\n          }\n        })\n      );\n    });\n  }\n\n  public setContainerWidth(width: number) {\n    this.state.source.resolve().setContainerWidth?.(width);\n  }\n\n  public isDataReadyToDisplay() {\n    return this.state.source.resolve().isDataReadyToDisplay?.() ?? true;\n  }\n\n  public cancelQuery() {\n    this.state.source.resolve().cancelQuery?.();\n  }\n\n  public getResultsStream(): Observable<SceneDataProviderResult> {\n    return this.state.source.resolve().getResultsStream();\n  }\n}\n"],"names":[],"mappings":";;AASO,MAAM,0BAA0B,eAAsE,CAAA;AAAA,EACpG,YAAY,KAAgC,EAAA;AACjD,IAAM,KAAA,CAAA;AAAA,MACJ,QAAQ,KAAM,CAAA,MAAA;AAAA,MACd,IAAM,EAAA,KAAA,CAAM,MAAO,CAAA,OAAA,GAAU,KAAM,CAAA,IAAA;AAAA,KACpC,CAAA,CAAA;AAED,IAAA,IAAA,CAAK,qBAAqB,MAAM;AAC9B,MAAA,IAAA,CAAK,KAAM,CAAA,GAAA;AAAA,QACT,IAAA,CAAK,MAAM,MAAO,CAAA,OAAA,GAAU,gBAAiB,CAAA,CAAC,UAAU,QAAa,KAAA;AACnE,UAAI,IAAA,QAAA,CAAS,IAAS,KAAA,QAAA,CAAS,IAAM,EAAA;AACnC,YAAA,IAAA,CAAK,QAAS,CAAA,EAAE,IAAM,EAAA,QAAA,CAAS,MAAM,CAAA,CAAA;AAAA,WACvC;AAAA,SACD,CAAA;AAAA,OACH,CAAA;AAAA,KACD,CAAA,CAAA;AAAA,GACH;AAAA,EAEO,kBAAkB,KAAe,EAAA;AA3B1C,IAAA,IAAA,EAAA,EAAA,EAAA,CAAA;AA4BI,IAAA,CAAA,EAAA,GAAA,CAAA,EAAA,GAAA,IAAA,CAAK,KAAM,CAAA,MAAA,CAAO,OAAQ,EAAA,EAAE,sBAA5B,IAAgD,GAAA,KAAA,CAAA,GAAA,EAAA,CAAA,IAAA,CAAA,EAAA,EAAA,KAAA,CAAA,CAAA;AAAA,GAClD;AAAA,EAEO,oBAAuB,GAAA;AA/BhC,IAAA,IAAA,EAAA,EAAA,EAAA,EAAA,EAAA,CAAA;AAgCI,IAAA,OAAA,CAAO,sBAAK,KAAM,CAAA,MAAA,CAAO,OAAQ,EAAA,EAAE,yBAA5B,IAAwD,GAAA,KAAA,CAAA,GAAA,EAAA,CAAA,IAAA,CAAA,EAAA,CAAA,KAAA,IAAA,GAAA,EAAA,GAAA,IAAA,CAAA;AAAA,GACjE;AAAA,EAEO,WAAc,GAAA;AAnCvB,IAAA,IAAA,EAAA,EAAA,EAAA,CAAA;AAoCI,IAAA,CAAA,EAAA,GAAA,CAAA,EAAA,GAAA,IAAA,CAAK,KAAM,CAAA,MAAA,CAAO,OAAQ,EAAA,EAAE,WAA5B,KAAA,IAAA,GAAA,KAAA,CAAA,GAAA,EAAA,CAAA,IAAA,CAAA,EAAA,CAAA,CAAA;AAAA,GACF;AAAA,EAEO,gBAAwD,GAAA;AAC7D,IAAA,OAAO,IAAK,CAAA,KAAA,CAAM,MAAO,CAAA,OAAA,GAAU,gBAAiB,EAAA,CAAA;AAAA,GACtD;AACF;;;;"}