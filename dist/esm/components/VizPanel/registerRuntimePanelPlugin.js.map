{"version":3,"file":"registerRuntimePanelPlugin.js","sources":["../../../../src/components/VizPanel/registerRuntimePanelPlugin.ts"],"sourcesContent":["import { PanelPlugin, PluginMetaInfo } from '@grafana/data';\nimport { getPluginImportUtils } from '@grafana/runtime';\n\nexport const runtimePanelPlugins = new Map<string, PanelPlugin>();\n\nexport interface RuntimePanelPluginOptions {\n  /**\n   * Please specify a pluginId that is unlikely to collide with other plugins.\n   */\n  pluginId: string;\n  plugin: PanelPlugin;\n}\n\n/**\n * Provides a way to register runtime panel plugins.\n * Please use a pluginId that is unlikely to collide with other plugins.\n */\nexport function registerRuntimePanelPlugin({ pluginId, plugin }: RuntimePanelPluginOptions) {\n  if (runtimePanelPlugins.has(pluginId)) {\n    throw new Error(`A runtime panel plugin with id ${pluginId} has already been registered`);\n  }\n\n  plugin.meta = {\n    ...plugin.meta,\n    id: pluginId,\n    name: pluginId,\n    module: 'runtime plugin',\n    baseUrl: 'runtime plugin',\n    info: {\n      author: {\n        name: 'Runtime plugin ' + pluginId,\n      },\n      description: '',\n      links: [],\n      logos: {\n        large: '',\n        small: '',\n      },\n      screenshots: [],\n      updated: '',\n      version: '',\n    } as PluginMetaInfo,\n  };\n\n  runtimePanelPlugins.set(pluginId, plugin);\n}\n\nexport function loadPanelPluginSync(pluginId: string) {\n  const { getPanelPluginFromCache } = getPluginImportUtils();\n\n  return getPanelPluginFromCache(pluginId) ?? runtimePanelPlugins.get(pluginId);\n}\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;AAGa,MAAA,mBAAA,uBAA0B,GAAyB,GAAA;AAczD,SAAS,0BAA2B,CAAA,EAAE,QAAU,EAAA,MAAA,EAAqC,EAAA;AAC1F,EAAI,IAAA,mBAAA,CAAoB,GAAI,CAAA,QAAQ,CAAG,EAAA;AACrC,IAAM,MAAA,IAAI,KAAM,CAAA,CAAA,+BAAA,EAAkC,QAAsC,CAAA,4BAAA,CAAA,CAAA,CAAA;AAAA,GAC1F;AAEA,EAAO,MAAA,CAAA,IAAA,GAAO,aACT,CAAA,cAAA,CAAA,EAAA,EAAA,MAAA,CAAO,IADE,CAAA,EAAA;AAAA,IAEZ,EAAI,EAAA,QAAA;AAAA,IACJ,IAAM,EAAA,QAAA;AAAA,IACN,MAAQ,EAAA,gBAAA;AAAA,IACR,OAAS,EAAA,gBAAA;AAAA,IACT,IAAM,EAAA;AAAA,MACJ,MAAQ,EAAA;AAAA,QACN,MAAM,iBAAoB,GAAA,QAAA;AAAA,OAC5B;AAAA,MACA,WAAa,EAAA,EAAA;AAAA,MACb,OAAO,EAAC;AAAA,MACR,KAAO,EAAA;AAAA,QACL,KAAO,EAAA,EAAA;AAAA,QACP,KAAO,EAAA,EAAA;AAAA,OACT;AAAA,MACA,aAAa,EAAC;AAAA,MACd,OAAS,EAAA,EAAA;AAAA,MACT,OAAS,EAAA,EAAA;AAAA,KACX;AAAA,GACF,CAAA,CAAA;AAEA,EAAoB,mBAAA,CAAA,GAAA,CAAI,UAAU,MAAM,CAAA,CAAA;AAC1C,CAAA;AAEO,SAAS,oBAAoB,QAAkB,EAAA;AA/CtD,EAAA,IAAA,EAAA,CAAA;AAgDE,EAAM,MAAA,EAAE,uBAAwB,EAAA,GAAI,oBAAqB,EAAA,CAAA;AAEzD,EAAA,OAAA,CAAO,6BAAwB,QAAQ,CAAA,KAAhC,IAAqC,GAAA,EAAA,GAAA,mBAAA,CAAoB,IAAI,QAAQ,CAAA,CAAA;AAC9E;;;;"}