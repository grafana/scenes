{"version":3,"file":"index.js","sources":["../../../../src/variables/macros/index.ts"],"sourcesContent":["import { DataLinkBuiltInVars } from '@grafana/data';\nimport { MacroVariableConstructor } from './types';\nimport { IntervalMacro, TimeFromAndToMacro, TimezoneMacro, UrlTimeRangeMacro } from './timeMacros';\nimport { AllVariablesMacro } from './AllVariablesMacro';\nimport { DataMacro, FieldMacro, SeriesMacro, ValueMacro } from './dataMacros';\nimport { UrlMacro } from './urlMacros';\nimport { OrgMacro, UserMacro } from './contextMacros';\n\nexport const macrosIndex = new Map<string, MacroVariableConstructor>([\n  [DataLinkBuiltInVars.includeVars, AllVariablesMacro],\n  [DataLinkBuiltInVars.keepTime, UrlTimeRangeMacro],\n  ['__value', ValueMacro],\n  ['__data', DataMacro],\n  ['__series', SeriesMacro],\n  ['__field', FieldMacro],\n  ['__url', UrlMacro],\n  ['__from', TimeFromAndToMacro],\n  ['__to', TimeFromAndToMacro],\n  ['__timezone', TimezoneMacro],\n  ['__user', UserMacro],\n  ['__org', OrgMacro],\n  ['__interval', IntervalMacro],\n  ['__interval_ms', IntervalMacro],\n]);\n\n/**\n * Allows you to register a variable expression macro that can then be used in strings with syntax ${<macro_name>.<fieldPath>}\n * Call this on app activation and unregister the macro on deactivation.\n * @returns a function that unregisters the macro\n */\nexport function registerVariableMacro(name: string, macro: MacroVariableConstructor): () => void {\n  if (macrosIndex.get(name)) {\n    throw new Error(`Macro already registered ${name}`);\n  }\n\n  macrosIndex.set(name, macro);\n\n  return () => {\n    macrosIndex.delete(name);\n  };\n}\n"],"names":[],"mappings":";;;;;;;AAQa,MAAA,WAAA,uBAAkB,GAAsC,CAAA;AAAA,EACnE,CAAC,mBAAoB,CAAA,WAAA,EAAa,iBAAiB,CAAA;AAAA,EACnD,CAAC,mBAAoB,CAAA,QAAA,EAAU,iBAAiB,CAAA;AAAA,EAChD,CAAC,WAAW,UAAU,CAAA;AAAA,EACtB,CAAC,UAAU,SAAS,CAAA;AAAA,EACpB,CAAC,YAAY,WAAW,CAAA;AAAA,EACxB,CAAC,WAAW,UAAU,CAAA;AAAA,EACtB,CAAC,SAAS,QAAQ,CAAA;AAAA,EAClB,CAAC,UAAU,kBAAkB,CAAA;AAAA,EAC7B,CAAC,QAAQ,kBAAkB,CAAA;AAAA,EAC3B,CAAC,cAAc,aAAa,CAAA;AAAA,EAC5B,CAAC,UAAU,SAAS,CAAA;AAAA,EACpB,CAAC,SAAS,QAAQ,CAAA;AAAA,EAClB,CAAC,cAAc,aAAa,CAAA;AAAA,EAC5B,CAAC,iBAAiB,aAAa,CAAA;AACjC,CAAC,EAAA;AAOe,SAAA,qBAAA,CAAsB,MAAc,KAA6C,EAAA;AAC/F,EAAI,IAAA,WAAA,CAAY,GAAI,CAAA,IAAI,CAAG,EAAA;AACzB,IAAM,MAAA,IAAI,KAAM,CAAA,CAAA,yBAAA,EAA4B,IAAM,CAAA,CAAA,CAAA,CAAA;AAAA,GACpD;AAEA,EAAY,WAAA,CAAA,GAAA,CAAI,MAAM,KAAK,CAAA,CAAA;AAE3B,EAAA,OAAO,MAAM;AACX,IAAA,WAAA,CAAY,OAAO,IAAI,CAAA,CAAA;AAAA,GACzB,CAAA;AACF;;;;"}