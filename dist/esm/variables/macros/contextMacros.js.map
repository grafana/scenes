{"version":3,"file":"contextMacros.js","sources":["../../../../src/variables/macros/contextMacros.ts"],"sourcesContent":["import { SceneObject } from '../../core/types';\nimport { FormatVariable } from '../interpolation/formatRegistry';\nimport { config } from '@grafana/runtime';\n\n/**\n * Handles expressions like ${__user.login}\n */\nexport class UserMacro implements FormatVariable {\n  public state: { name: string; type: string };\n\n  public constructor(name: string, _: SceneObject) {\n    this.state = { name: name, type: 'user_macro' };\n  }\n\n  public getValue(fieldPath?: string): string {\n    const user = config.bootData.user;\n\n    switch (fieldPath) {\n      case 'login':\n        return user.login;\n      case 'email':\n        return user.email;\n      case 'id':\n      default:\n        return String(user.id);\n    }\n  }\n\n  public getValueText?(): string {\n    return '';\n  }\n}\n\n/**\n * Handles expressions like ${__org.name}\n */\nexport class OrgMacro implements FormatVariable {\n  public state: { name: string; type: string };\n\n  public constructor(name: string, _: SceneObject) {\n    this.state = { name: name, type: 'org_macro' };\n  }\n\n  public getValue(fieldPath?: string): string {\n    const user = config.bootData.user;\n\n    switch (fieldPath) {\n      case 'name':\n        return user.orgName;\n      case 'id':\n      default:\n        return String(user.orgId);\n    }\n  }\n\n  public getValueText?(): string {\n    return '';\n  }\n}\n"],"names":[],"mappings":";;AAOO,MAAM,SAAoC,CAAA;AAAA,EAGxC,WAAA,CAAY,MAAc,CAAgB,EAAA;AAC/C,IAAA,IAAA,CAAK,KAAQ,GAAA,EAAE,IAAY,EAAA,IAAA,EAAM,YAAa,EAAA,CAAA;AAAA,GAChD;AAAA,EAEO,SAAS,SAA4B,EAAA;AAC1C,IAAM,MAAA,IAAA,GAAO,OAAO,QAAS,CAAA,IAAA,CAAA;AAE7B,IAAQ,QAAA,SAAA;AAAA,MACD,KAAA,OAAA;AACH,QAAA,OAAO,IAAK,CAAA,KAAA,CAAA;AAAA,MACT,KAAA,OAAA;AACH,QAAA,OAAO,IAAK,CAAA,KAAA,CAAA;AAAA,MACT,KAAA,IAAA,CAAA;AAAA,MAAA;AAEH,QAAO,OAAA,MAAA,CAAO,KAAK,EAAE,CAAA,CAAA;AAAA,KAAA;AAAA,GAE3B;AAAA,EAEO,YAAwB,GAAA;AAC7B,IAAO,OAAA,EAAA,CAAA;AAAA,GACT;AACF,CAAA;AAKO,MAAM,QAAmC,CAAA;AAAA,EAGvC,WAAA,CAAY,MAAc,CAAgB,EAAA;AAC/C,IAAA,IAAA,CAAK,KAAQ,GAAA,EAAE,IAAY,EAAA,IAAA,EAAM,WAAY,EAAA,CAAA;AAAA,GAC/C;AAAA,EAEO,SAAS,SAA4B,EAAA;AAC1C,IAAM,MAAA,IAAA,GAAO,OAAO,QAAS,CAAA,IAAA,CAAA;AAE7B,IAAQ,QAAA,SAAA;AAAA,MACD,KAAA,MAAA;AACH,QAAA,OAAO,IAAK,CAAA,OAAA,CAAA;AAAA,MACT,KAAA,IAAA,CAAA;AAAA,MAAA;AAEH,QAAO,OAAA,MAAA,CAAO,KAAK,KAAK,CAAA,CAAA;AAAA,KAAA;AAAA,GAE9B;AAAA,EAEO,YAAwB,GAAA;AAC7B,IAAO,OAAA,EAAA,CAAA;AAAA,GACT;AACF;;;;"}