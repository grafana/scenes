{"version":3,"file":"wrapInSafeSerializableSceneObject.js","sources":["../../../src/utils/wrapInSafeSerializableSceneObject.ts"],"sourcesContent":["import { config } from '@grafana/runtime';\nimport { SceneObject } from '../core/types';\nimport { SafeSerializableSceneObject } from './SafeSerializableSceneObject';\nimport { ScopedVar } from '@grafana/data';\n\nexport function shouldWrapInSafeSerializableSceneObject(grafanaVersion: string): boolean {\n  const pattern = /^(\\d+)\\.(\\d+)\\.(\\d+)/;\n  const match = grafanaVersion.match(pattern);\n\n  if (!match) {\n    return false;\n  }\n\n  const major = parseInt(match[1], 10);\n  const minor = parseInt(match[2], 10);\n  const patch = parseInt(match[3], 10);\n\n  if (major === 11) {\n    return (minor === 0 && patch >= 4) || (minor === 1 && patch >= 2) || minor > 1;\n  }\n\n  if (major === 10) {\n    return (minor === 4 && patch >= 8) || minor >= 5;\n  }\n\n  return major > 11; // Assuming versions greater than 11 are also supported.\n}\n\nexport function wrapInSafeSerializableSceneObject(sceneObject: SceneObject): ScopedVar {\n  const version = config.buildInfo.version;\n\n  if (shouldWrapInSafeSerializableSceneObject(version)) {\n    return new SafeSerializableSceneObject(sceneObject);\n  }\n\n  return { value: sceneObject, text: '__sceneObject' };\n}\n"],"names":[],"mappings":";;;AAKO,SAAS,wCAAwC,cAAiC,EAAA;AACvF,EAAA,MAAM,OAAU,GAAA,sBAAA,CAAA;AAChB,EAAM,MAAA,KAAA,GAAQ,cAAe,CAAA,KAAA,CAAM,OAAO,CAAA,CAAA;AAE1C,EAAA,IAAI,CAAC,KAAO,EAAA;AACV,IAAO,OAAA,KAAA,CAAA;AAAA,GACT;AAEA,EAAA,MAAM,KAAQ,GAAA,QAAA,CAAS,KAAM,CAAA,CAAA,CAAA,EAAI,EAAE,CAAA,CAAA;AACnC,EAAA,MAAM,KAAQ,GAAA,QAAA,CAAS,KAAM,CAAA,CAAA,CAAA,EAAI,EAAE,CAAA,CAAA;AACnC,EAAA,MAAM,KAAQ,GAAA,QAAA,CAAS,KAAM,CAAA,CAAA,CAAA,EAAI,EAAE,CAAA,CAAA;AAEnC,EAAA,IAAI,UAAU,EAAI,EAAA;AAChB,IAAQ,OAAA,KAAA,KAAU,KAAK,KAAS,IAAA,CAAA,IAAO,UAAU,CAAK,IAAA,KAAA,IAAS,KAAM,KAAQ,GAAA,CAAA,CAAA;AAAA,GAC/E;AAEA,EAAA,IAAI,UAAU,EAAI,EAAA;AAChB,IAAA,OAAQ,KAAU,KAAA,CAAA,IAAK,KAAS,IAAA,CAAA,IAAM,KAAS,IAAA,CAAA,CAAA;AAAA,GACjD;AAEA,EAAA,OAAO,KAAQ,GAAA,EAAA,CAAA;AACjB,CAAA;AAEO,SAAS,kCAAkC,WAAqC,EAAA;AACrF,EAAM,MAAA,OAAA,GAAU,OAAO,SAAU,CAAA,OAAA,CAAA;AAEjC,EAAI,IAAA,uCAAA,CAAwC,OAAO,CAAG,EAAA;AACpD,IAAO,OAAA,IAAI,4BAA4B,WAAW,CAAA,CAAA;AAAA,GACpD;AAEA,EAAA,OAAO,EAAE,KAAA,EAAO,WAAa,EAAA,IAAA,EAAM,eAAgB,EAAA,CAAA;AACrD;;;;"}